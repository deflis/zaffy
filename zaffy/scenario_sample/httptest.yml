#type: http_setting
#
#url_base: "http://hogefuga.com/piyo/"
#
#---
- HTTP テスト

- action: debug.print

- action: require.action
  path: required.yml

- action: const.set
  url: localhost

- action: http.post
  url: http://<<const.url>>:8000/
  params:
    hoge: 10
    fuga: piyo

- action: http.get
  url: http://hogefugapiyo.com/
  assertex:
   - true # なんらかの例外が発生することだけをチェックしたい場合
   - ex|classname == 'ConnectionError'

- action: http.get
  url: http://google.co.jp/
  assert:
   - res.status == 200
   #- res.status in [300,2,3]
   #- res.encoding is json_equal '{"hoge":10}'
   #- '"stat" in "instatu"'
   #- '"p3p" in res.headers'
   #- res.cookies.PREF == "hoge"
   #- res.content|length < 200
   #- res.encoding|upper == "hoge"
